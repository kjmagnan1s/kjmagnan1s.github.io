{
  "articles": [
    {
      "path": "about.html",
      "title": "I am ...",
      "author": [],
      "contents": "\r\n\r\n\r\na data analyst, visualization specialist, data strategy leader, public safety thought leader, and Tableau expert. In my past roles, I have\r\nworked as a researcher and technical consultant alongside exceptionally smart and talented people to improve socioeconomic and safety outcomes of Chicago residents using public sector data and working with policymakers at all levels of government. Today, I am a Consultant at Slalom Consulting wearing a variety of hats from Data Visualization Specialist, Data Strategy Expert, Sales Solution Lead, and Public Safety Data Subject Matter Expert. While my career goals have expanded to support a variety of industries in their use of data to drive value and make better informed decisions, I will always seek out opportunities to work within the public sector to improve the lives and well-being of residents, especially those most disproportionately impacted within our society.\r\nIn my personal life, I have a wonderful soon-to-be-wife and when I am not home cooking for her and paying attention to our two cats, we are boarding the next plane to ‘somewhere’. I am a culinary curious home chef and love cooking new recipes or old favorites and posting them to my Instagram @kevin_cooks_chitown. Aside from cooking, I am a coffee enthusiast, an avid gamer, and a sci-fi junkie.\r\n\r\n\r\n\r\n\r\n… always thinking about my next destination\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2025-02-14T13:00:25-06:00"
    },
    {
      "path": "index.html",
      "title": "",
      "author": [],
      "contents": "\r\n\r\n\r\n\r\n",
      "last_modified": "2025-02-14T12:52:58-06:00"
    },
    {
      "path": "python.html",
      "title": "Python Sample Code",
      "author": [
        {
          "name": "Kevin Magnan",
          "url": "https://twitter.com/KevinMagnan"
        }
      ],
      "date": "05-15-2017",
      "contents": "\r\n\r\n# -*- coding: utf-8 -*-\r\n# ---------------------------------------------------------------------------\r\n# thesis.py\r\n# Created on: 2017-05-15 21:40:55.00000\r\n#   (generated by Kevin Magnan)\r\n# Description: \r\n# ---------------------------------------------------------------------------\r\n\r\n# Set the necessary product code\r\n# import arcinfo\r\n\r\n\r\n# Import arcpy module\r\nimport arcpy\r\nfrom arcpy import env\r\nenv.workspace = \"C:/Users/kjmag/Google Drive/Documents/UCHICAGO/MA Thesis/Data/master/thesis.gdb/layers\"\r\n\r\nprint \"environment set successfully\"\r\n\r\n# Process: Add Field\r\narcpy.AddField_management(\"census_tracts_join\", \"orig_area\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\nprint \"done1\"\r\n\r\n# Process: Calculate Field\r\narcpy.CalculateField_management(\"census_tracts_join\", \"orig_area\", '!Shape_Area!', \"PYTHON\")\r\n\r\nprint \"done2\"\r\n\r\n# Process: Identity\r\narcpy.Identity_analysis(\"wards\", \"census_tracts_join\", \"identity\", \"ALL\", \"\", \"NO_RELATIONSHIPS\")\r\n\r\nprint \"done3\"\r\n\r\n# Process: Add Field (2)\r\narcpy.AddField_management(\"identity\", \"pct_orig\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\nprint \"done4\"\r\n\r\n# Process: Calculate Field (2)\r\narcpy.CalculateField_management(\"identity\", \"pct_orig\", \"!Shape_area! / !orig_area!\", \"PYTHON\", \"\")\r\n\r\nprint \"done5\"\r\n\r\n# Process: Add new proportion fields\r\nnewfields = [\"new_pop\", \"new_male\", \"new_female\", \"new_under18\", \"new_18t34\", \"new_35t64\", \"new_over65\", \"new_white\", \"new_black\", \"new_nothisp\", \"new_hisp\", \"new_pop25\",\r\n             \"new_lesshs\", \"new_hs\", \"new_bach\", \"new_schoolpop\", \"new_dropout\", \"new_enroll\", \"new_workpop\", \"new_employ\", \"new_unemploy\", \"new_ag_income_hh\",\r\n             \"new_numhh\", \"new_own\", \"new_rent\", \"new_povpop\", \"new_pov\", \"new_notpov\"]\r\n\r\nprint \"newfields variable set\"\r\n\r\nfor x in newfields:\r\n        arcpy.AddField_management(\"identity_cleaned\", x, \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\nprint \"Add done\"\r\n\r\n# Process: Calculate new field values\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_pop\", \"!po! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_male\", \"!male! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_female\", \"!female! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_under18\", \"!under18! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_18t34\", \"!age18t34! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_35t64\", \"!age35t64! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_over65\", \"!over64! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_white\", \"!white! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_black\", \"!black! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_nothisp\", \"!not_hisp! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_hisp\", \"!hisp! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_pop25\", \"!pop25! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_lesshs\", \"!less_hs! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_hs\", \"!hs! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_bach\", \"!bach! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_schoolpop\", \"!schoolpop! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_dropout\", \"!dropout! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_enroll\", \"!enroll! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_workpop\", \"!workpop! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_employ\", \"!employ! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_unemploy\", \"!unemploy! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_ag_income_hh\", \"!ag_income_hh! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_numhh\", \"!houses! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_own\", \"!own! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_rent\", \"!rent! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_povpop\", \"!pov_pop! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_pov\", \"!pov! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"identity_cleaned\", \"new_notpov\", \"!not_pov! * !pct_orig!\", \"PYTHON\", \"\")\r\n\r\nprint \"Done Calc\"\r\n\r\n#Process: Dissolve census_tracts into wards\r\narcpy.Dissolve_management(\"identity_cleaned\", \"dissolve\", [\"ward\"], [[\"new_pop\", \"SUM\"], [\"new_male\", \"SUM\"], [\"new_female\", \"SUM\"], [\"new_under18\", \"SUM\"], [\"new_18t34\", \"SUM\"],\r\n                                [\"new_35t64\", \"SUM\"], [\"new_over65\", \"SUM\"], [\"new_white\", \"SUM\"], [\"new_black\", \"SUM\"], [\"new_nothisp\", \"SUM\"], [\"new_hisp\", \"SUM\"],\r\n                                [\"new_pop25\", \"SUM\"], [\"new_lesshs\", \"SUM\"], [\"new_hs\", \"SUM\"], [\"new_bach\", \"SUM\"], [\"new_schoolpop\", \"SUM\"], [\"new_dropout\", \"SUM\"],\r\n                                [\"new_enroll\", \"SUM\"], [\"new_workpop\", \"SUM\"], [\"new_employ\", \"SUM\"], [\"new_unemploy\", \"SUM\"], [\"new_ag_income_hh\", \"SUM\"], [\"new_numhh\", \"SUM\"],\r\n                                [\"new_own\", \"SUM\"], [\"new_rent\", \"SUM\"], [\"new_povpop\", \"SUM\"], [\"new_pov\", \"SUM\"], [\"new_notpov\", \"SUM\"]],\r\n                                \"\", \"\")\r\n    \r\n\r\nprint \"Done Dissolve\"\r\n\r\n# Process: Add ward_num field\r\narcpy.AddField_management(\"dissolve\", \"ward_num\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\n# Process: Calculate ward_num field\r\narcpy.CalculateField_management(\"dissolve\", \"ward_num\", \"!ward!\", \"PYTHON\", \"\")\r\n\r\n Process: Add new proportion fields\r\npctfields = [\"pct_male\", \"pct_female\", \"pct_under18\", \"pct_18t34\", \"pct_35t64\", \"pct_over65\", \"pct_white\", \"pct_black\", \"pct_nothisp\", \"pct_hisp\", \"pct_lesshs\", \"pct_hs\",\r\n              \"pct_bach\", \"pct_dropout\", \"pct_enroll\", \"pct_employ\", \"pct_unemploy\", \"pct_hhincome\", \"pct_own\", \"pct_rent\", \"pct_pov\", \"pct_notpov\"]\r\n\r\nprint \"pctfields variable set\"\r\n\r\nfor x in pctfields:\r\n        arcpy.AddField_management(\"dissolve_w_calls_crime\", x, \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\nprint \"Add done\"\r\n\r\n### Process: Calculate new field values\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_male\", \"!SUM_new_male! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_female\", \"!SUM_new_female! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_under18\", \"!SUM_new_under18! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_18t34\", \"!SUM_new_18t34! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_35t64\", \"!SUM_new_35t64! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_over65\", \"!SUM_new_over65! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_white\", \"!SUM_new_white! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_black\", \"!SUM_new_black! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_nothisp\", \"!SUM_new_nothisp! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_hisp\", \"!SUM_new_hisp! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_lesshs\", \"!SUM_new_lesshs! / !SUM_new_pop25! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_hs\", \"!SUM_new_hs! / !SUM_new_pop25! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_bach\", \"!SUM_new_bach! / !SUM_new_pop25! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_dropout\", \"!SUM_new_dropout! / !SUM_new_schoolpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_enroll\", \"!SUM_new_enroll! / !SUM_new_schoolpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_employ\", \"!SUM_new_employ! / !SUM_new_workpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_unemploy\", \"!SUM_new_unemploy! / !SUM_new_workpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_hhincome\", \"!SUM_new_ag_income_hh! / !SUM_new_numhh!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_own\", \"!SUM_new_own! / !SUM_new_numhh! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_rent\", \"!SUM_new_rent! / !SUM_new_numhh! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_pov\", \"!SUM_new_pov! / !SUM_new_povpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_notpov\", \"!SUM_new_notpov! / !SUM_new_povpop! * 100\", \"PYTHON\", \"\")\r\n\r\n print \"done\"\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_male\", \"!pct_male! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_female\", \"!pct_female! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_under18\", \"!pct_under18! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_18t34\", \"!pct_18t34! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_35t64\", \"!pct_35t64! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_over65\", \"!pct_over65! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_white\", \"!pct_white! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_black\", \"!pct_black! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_nothisp\", \"!pct_nothisp! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_hisp\", \"!pct_hisp! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_lesshs\", \"!pct_lesshs! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_hs\", \"!pct_hs! * 100\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_bach\", \"!pct_bach! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_dropout\", \"!pct_dropout! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_enroll\", \"!pct_enroll! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_employ\", \"!pct_employ! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_unemploy\", \"!pct_unemploy! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_own\", \"!pct_own! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_rent\", \"!pct_rent! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_pov\", \"!pct_pov! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"pct_notpov\", \"!pct_notpov! * 100\", \"PYTHON\", \"\")\r\n\r\n# Add/Calculate Field\r\narcpy.AddField_management(\"dissolve_w_calls_crime\", \"call911_vcrime\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.AddField_management(\"dissolve_w_calls_crime\", \"call911_pcrime\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.AddField_management(\"dissolve_w_calls_crime\", \"call311_vcrime\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.AddField_management(\"dissolve_w_calls_crime\", \"call311_pcrime\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"call911_vcrime\", \"!ward_911_call_rate! / !violent_crime_rate!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"call911_pcrime\", \"!ward_911_call_rate! / !property_crime_rate!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"call311_vcrime\", \"!ward_311_call_rate! / !violent_crime_rate!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"call311_pcrime\", \"!ward_311_call_rate! / !property_crime_rate!\", \"PYTHON\", \"\")\r\n\r\n\r\nprint \"Calculate done\"\r\n\r\n# set path for OLS outputs\r\nolsmap = \"C:/Users/kjmag/Google Drive/Documents/UCHICAGO/MA Thesis/Data/master/thesis.gdb/olsmap\"\r\nolsCoef = \"C:/Users/kjmag/Google Drive/Documents/UCHICAGO/MA Thesis/Data/master/thesis.gdb/olsCoef\"\r\nolsDiag = \"C:/Users/kjmag/Google Drive/Documents/UCHICAGO/MA Thesis/Data/master/thesis.gdb/olsDiag\"\r\nolsreport = \"C:/Users/kjmag/Google Drive/Documents/UCHICAGO/MA Thesis/Data/master/olsreport.pdf\"\r\n\r\n# Initial OLS\r\narcpy.OrdinaryLeastSquares_stats(\"dissolve_w_calls_crime.shp\", \"ward\", \"olsmap\", \r\n                                 \"ward_total_call_rate\",\r\n                                 \"ward_crime_rate; pct_black; pct_lesshs; pct_dropout; pct_unemploy; pct_hhincome\",\r\n                                 \"olsCoefTab.dbf\", \"olsDiagTab.dbf\", \"olsreport\")\r\n\r\n### Process: Add Field\r\narcpy.AddField_management(\"dissolve_w_calls_crime\", \"orig_area\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\nprint \"done\"\r\n\r\n### Process: Calculate Field\r\narcpy.CalculateField_management(\"dissolve_w_calls_crime\", \"orig_area\", '!Shape_Area!', \"PYTHON\")\r\n\r\nprint \"done\"\r\n                                    \r\n# Process: Identity\r\narcpy.Identity_analysis(\"raster\", \"dissolve_w_calls_crime\", \"raster_identity\", \"ALL\", \"\", \"NO_RELATIONSHIPS\")\r\n\r\nprint \"done\"\r\n\r\n\r\n# Process: Spatial Join\r\narcpy.SpatialJoin_analysis(\"dissolve_w_calls_crime\", \"raster\", \"raster_spatialjoin\")\r\n\r\n# Process: Add Field\r\narcpy.AddField_management(\"raster_sjoin_clip\", \"pct_orig_area\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\nprint \"done\"\r\n\r\n# Process: Calculate Field\r\narcpy.CalculateField_management(\"raster_sjoin_clip\", \"pct_orig_area\", \"!Shape_area! / !orig_area!\", \"PYTHON\")\r\n\r\nprint \"done\"\r\n\r\n# Process: Calculate new field values\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_pop\", \"!SUM_new_pop! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_male\", \"!SUM_new_male! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_female\", \"!SUM_new_female! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_under18\", \"!SUM_new_under18! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_18t34\", \"!SUM_new_18t34! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_35t64\", \"!SUM_new_35t64! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_over65\", \"!SUM_new_over65! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_white\", \"!SUM_new_white! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_black\", \"!SUM_new_black! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_nothisp\", \"!SUM_new_nothisp! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_hisp\", \"!SUM_new_hisp! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_pop25\", \"!SUM_new_pop25! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_lesshs\", \"!SUM_new_lesshs! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_hs\", \"!SUM_new_hs! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_bach\", \"!SUM_new_bach! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_schoolpop\", \"!SUM_new_schoolpop! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_dropout\", \"!SUM_new_dropout! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_enroll\", \"!SUM_new_enroll! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_workpop\", \"!SUM_new_workpop! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_employ\", \"!SUM_new_employ! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_unemploy\", \"!SUM_new_unemploy! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_ag_income_hh\", \"!SUM_new_ag_income_hh! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_numhh\", \"!SUM_new_numhh! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_own\", \"!SUM_new_own! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_rent\", \"!SUM_new_rent! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_povpop\", \"!SUM_new_povpop! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_pov\", \"!SUM_new_pov! * !pct_orig!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"SUM_new_notpov\", \"!SUM_new_notpov! * !pct_orig!\", \"PYTHON\", \"\") \r\n\r\n print \"done\"\r\n\r\n Process: Calculate new field values\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_male\", \"!SUM_new_male! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_female\", \"!SUM_new_female! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_under18\", \"!SUM_new_under18! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_18t34\", \"!SUM_new_18t34! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_35t64\", \"!SUM_new_35t64! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_over65\", \"!SUM_new_over65! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_white\", \"!SUM_new_white! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_black\", \"!SUM_new_black! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_nothisp\", \"!SUM_new_nothisp! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_hisp\", \"!SUM_new_hisp! / !SUM_new_pop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_lesshs\", \"!SUM_new_lesshs! / !SUM_new_pop25! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_hs\", \"!SUM_new_hs! / !SUM_new_pop25! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_bach\", \"!SUM_new_bach! / !SUM_new_pop25! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_dropout\", \"!SUM_new_dropout! / !SUM_new_schoolpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_enroll\", \"!SUM_new_enroll! / !SUM_new_schoolpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_employ\", \"!SUM_new_employ! / !SUM_new_workpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_unemploy\", \"!SUM_new_unemploy! / !SUM_new_workpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_hhincome\", \"!SUM_new_ag_income_hh! / !SUM_new_numhh!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_own\", \"!SUM_new_own! / !SUM_new_numhh! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_rent\", \"!SUM_new_rent! / !SUM_new_numhh! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_pov\", \"!SUM_new_pov! / !SUM_new_povpop! * 100\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"pct_notpov\", \"!SUM_new_notpov! / !SUM_new_povpop! * 100\", \"PYTHON\", \"\")\r\n\r\n\r\n print \"done\"\r\n\r\n\r\n\r\n# Process: Calculate fields\r\narcpy.CalculateField_management(\"raster_intersect\", \"HOMICIDE\", \"!HOMICIDE! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"CRIMINAL_SEXUAL_ASSAULT\", \"!CRIMINAL_SEXUAL_ASSAULT! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"ROBBERY\", \"!ROBBERY! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"AGGRAVATED_ASSAULT\", \"!AGGRAVATED_ASSAULT! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"AGGRAVATED_BATTERY\", \"!AGGRAVATED_BATTERY! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"BURGLARY\", \"!BURGLARY! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"MOTOR_VEHICLE_THEFT\", \"!MOTOR_VEHICLE_THEFT! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"LARCENY\", \"!LARCENY! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"ward_311call_count\", \"!ward_311call_count! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"ward_911call_count\", \"!ward_911call_count! * !pct_orig!\", \"PYTHON\", \"\") \r\narcpy.CalculateField_management(\"raster_intersect\", \"total_311_911_call_count\", \"!total_311_911_call_count! * !pct_orig!\", \"PYTHON\", \"\") \r\n\r\n\r\n# Process: Calculate new field values\r\narcpy.CalculateField_management(\"raster_intersect\", \"violent_crime_rate\", \"(!HOMICIDE! + !CRIMINAL_SEXUAL_ASSAULT! + !ROBBERY! + !AGGRAVATED_ASSAULT! + !AGGRAVATED_BATTERY!) / !SUM_new_pop!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"property_crime_rate\", \"(!BURGLARY! + !MOTOR_VEHICLE_THEFT! + !LARCENY!) / !SUM_new_pop!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"ward_311_call_rate\", \"!ward_311call_count! / !SUM_new_pop!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"ward_911_call_rate\", \"!ward_911call_count! / !SUM_new_pop!\", \"PYTHON\", \"\")\r\narcpy.CalculateField_management(\"raster_intersect\", \"ward_total_call_rate\", \"!total_311_911_call_count! / !SUM_new_pop!\", \"PYTHON\", \"\")\r\n\r\nprint \"done\"\r\n\r\n# Process: Add new field values\r\narcpy.AddField_management(\"raster_sjoin_clip\", \"violent_rate_10k\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.AddField_management(\"raster_sjoin_clip\", \"property_rate_10k\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.AddField_management(\"raster_sjoin_clip\", \"callrate_311_10k\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.AddField_management(\"raster_sjoin_clip\", \"callrate_911_10k\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\narcpy.AddField_management(\"raster_sjoin_clip\", \"callrate_total_10k\", \"DOUBLE\", \"\", \"\", \"\", \"\", \"NULLABLE\", \"NON_REQUIRED\")\r\n\r\nprint \"done\"\r\n\r\n# Process: Calculate new field values\r\narcpy.CalculateField_management(\"raster_sjoin_clip\", \"violent_rate_10k\", \"(!HOMICIDE! + !CRIMINAL_SEXUAL_ASSAULT! + !ROBBERY! + !AGGRAVATED_ASSAULT! + !AGGRAVATED_BATTERY!) / !SUM_new_pop! * 10000\", \"PYTHON_9.3\", \"\")\r\narcpy.CalculateField_management(\"raster_sjoin_clip\", \"property_rate_10k\", \"(!BURGLARY! + !MOTOR_VEHICLE_THEFT! + !LARCENY!) / !SUM_new_pop! * 10000\", \"PYTHON_9.3\", \"\")\r\narcpy.CalculateField_management(\"raster_sjoin_clip\", \"callrate_311_10k\", \"!ward_311call_count! / !SUM_new_pop! * 10000\", \"PYTHON_9.3\", \"\")\r\narcpy.CalculateField_management(\"raster_sjoin_clip\", \"callrate_911_10k\", \"!ward_911call_count! / !SUM_new_pop! * 10000\", \"PYTHON_9.3\", \"\")\r\narcpy.CalculateField_management(\"raster_sjoin_clip\", \"callrate_total_10k\", \"!total_311_911_call_count! / !SUM_new_pop! * 10000\", \"PYTHON_9.3\", \"\")\r\n\r\nprint \"done\"\r\n\r\narcpy.HotSpots_stats(\"dissolve_join\", \"HOMICIDE\", \"homicide_hotspot\", \"CONTIGUITY_EDGES_CORNERS\", \"\", \"NONE\", \"\", \"\", \"\", \"\") \r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2024-05-31T20:56:25-05:00"
    },
    {
      "path": "sql.html",
      "title": "SQL Sample Code",
      "author": [
        {
          "name": "Kevin Magnan",
          "url": "https://twitter.com/KevinMagnan"
        }
      ],
      "date": "01-31-2020",
      "contents": "\r\n\r\n/* **Scrubbed queries meant as an example of SQL code I have written. In no way does this code represents actual data or data tables** */\r\n\r\n/* crimes_historical */\r\nSELECT RPT_NO, DATE_OCCURRED, DATE_APPROVED, STNUM || ' ' || STDIR || ' '|| STREET || ' ' || CITY || ' ' || STATE AS ADDRESS, UCR, FBI, \"PRIMARY\", \r\nDESCRIPTION, STATUS, \r\nINDX, LOCATION, LOCATION_DESCR, DOMESTIC, SHOOTINGS, VEHICLE_THEFT, METHOD, METHOD_DESCR, BEATASGN, CAU, MOTIVE_DESCR, \r\nBEAT, DISTRICT, WARPT_NO\r\nFROM DB.CRIMES\r\n--LEFT JOIN PRS_USER.ADDR_ADDRESS_MASTER c\r\n--ON a.STNUM = c.STREET_NO AND a.STDIR = c.STREET_DIRECTION AND a.STREET = c.STREET_NME\r\nWHERE DATE_APPROVED >= '11-FEB-2019'\r\nAND DATE_APPROVED <= '10-MAR-2019'\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\n--AND \"CLASS\" IN ('BURGLARY', 'ROBBERY', 'HOMICIDE', 'MOTOR VEHICLE THEFT', 'CRIM SEXUAL ASSAULT', 'THEFT')\r\nAND UCR IN ('0110','0261','0262','0263','0264','0265','0266','0271','0272','0274','0275','0281','0291','031A','031B','0312','0313','0320','0325',\r\n'0326','033A','033B','0330','0331','0334','0337','0340','041A','041B','0420','0430','0440','0450','0451','0452','0453','0454','0461','0462','0475','0479',\r\n'0480','0481','0482','0483','0484','0487','0488','0489','1753','1754','0610','0620','0630','0650','0710','0720','0810','0910','0915','0917','0918','0920',\r\n'0925','0927','0928','0930','0935','0937','0938')\r\nAND FBI IN ('00','01A','01B','02','03','04A','04B','05','06','07','09','01B','08A','08B','10','11','12','13','14','15','16','17','18','19','20','22',\r\n'24','26','MCC','TRF','WRT','21')\r\nAND DISTRICT IN ('04', '05', '06', '07', '22'); \r\n\r\n/* Index crimes */\r\nSELECT *\r\nFROM DB.CRIMES\r\nWHERE (DATE_OCCURRED >= '28-JAN-2018' AND DATE_OCCURRED <= '24-FEB-2018'\r\nOR DATE_OCCURRED >= '28-JAN-2019' AND DATE_OCCURRED <= '24-FEB-2019')\r\nAND INDX IN ('I')\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\nAND AREA IN ('3');\r\n\r\n\r\n/*Shootings*/\r\n/* shootings without the lat/long data */\r\nSELECT a.RPT_NO, a.BEAT, b.TABLE_SOURCE\r\nFROM DB.CRIMES a\r\nRIGHT JOIN RPT.COMPSTAT_SHOOTING b\r\nON a.RPT_NO = b.RPT_NO\r\nWHERE a.DATE_OCCURRED >= '01-JAN-2018'\r\nAND a.DATE_OCCURRED <= '31-DEC-2018'\r\n--AND A.DISTRICT IN ('04','05','06','07','22');\r\n\r\n/* The crimes table with shootings attached */\r\n/* crimes_historical */\r\nSELECT * \r\nFROM DB.CRIMES a\r\n--LEFT JOIN RPT.COMPSTAT_SHOOTING b\r\n--ON a.RPT_NO = b.RPT_NO\r\n--LEFT JOIN PRS_USER.ADDR_ADDRESS_MASTER c\r\n--ON a.STNUM = c.STREET_NO AND a.STDIR = c.STREET_DIRECTION AND a.STREET = c.STREET_NME\r\nWHERE DATE_OCCURRED BETWEEN TO_DATE('01-MAY-2013') AND TO_DATE('30-SEP-2018')\r\nAND (rtrim((to_char(DATE_OCCURRED,'MON'))) in ('MAY','JUN','JUL','AUG','SEP'))\r\n--AND a.FBI IN ('04B','04','01A','01B','02','03','04A','05','07')\r\nAND UCR in ('031A','031B','0326','033A','033B') \r\nAND (FBI IN ('00','01A','01B','02','03','04A','04B','05','06','07','09','01B','08A','08B','10',\r\n'11','12','13','14','15','16','17','18','19','20','22','24','26','MCC','TRF','WRT','21'))\r\nAND a.STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\nAND a.DISTRICT IN ('02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '15', '25');\r\n\r\n/*Shooting Victims*/\r\nSELECT RPT_NO, COUNT(RPT_NO) AS VICTIMS\r\nFROM RPT.COMPSTAT_SHOOTING_VICTIM\r\nWHERE DATE_OCCURRED >= '04-FEB-2019'\r\nAND DATE_OCCURRED <= '03-MAR-2019'\r\nAND DISTRICT IN ('03', '08', '09', '10')\r\nGROUP BY RPT_NO;\r\n\r\n/*Inventories*/\r\nSELECT DISTINCT INCIDENT_NO, RECOVERED_DATE, STREET_NO || ' ' || STREET_DIRECTION || ' ' || STREET_NME || ' ' || a.CITY || ' ' || STATE AS REC_ADDRESS, a.DISTRICT,\r\nINVENTORY_TYPE, UCR, RPT_NO, DATE_OCCURRED\r\nFROM DB.EVIDENCENVENTORIES a\r\nINNER JOIN DB.CRIMES b\r\nON a.INCIDENT_NO = b.RPT_NO\r\nWHERE b.DATE_OCCURRED >= '04-FEB-2019'\r\nAND b.DATE_OCCURRED <= '03-MAR-2019'\r\nAND a.DISTRICT IN ('03', '08')\r\nAND a.INVENTORY_TYPE IN ('EXPENDED SHELL', 'FIRED BULLET');\r\n\r\n/*Inventories v2*/\r\nSELECT DISTINCT a.INCIDENT_NO, a.CREATED_DATE, a.STREET_NO || ' ' || a.STREET_DIRECTION || ' ' || a.STREET_NME || ' ' || a.CITY || ' ' || a.STATE AS REC_ADDRESS, a.DISTRICT,\r\na.INVENTORY_TYPE, a.INCIDENT_TYPE, b.TABLE_SOURCE\r\nFROM DB.EVIDENCENVENTORIES a\r\nLEFT JOIN RPT.COMPSTAT_SHOOTING b\r\nON a.INCIDENT_NO = b.RPT_NO\r\nWHERE RECOVERED_DATE >= '11-FEB-2019'\r\nAND RECOVERED_DATE <= '10-MAR-2019'\r\nAND a.DISTRICT IN ('10')\r\nAND INVENTORY_TYPE IN ('EXPENDED SHELL', 'FIRED BULLET');\r\n\r\n/* STREET_STOP Data */\r\nSELECT CONTACT_NO, CONTACT_SOURCE, CONTACT_TYPE, CONTACT_DATE, DISTRICT, BEAT, PD_UNIT_NO\r\nFROM DB.STREET_STOP_DETAILS\r\nWHERE CONTACT_DATE >= '11-FEB-2019'\r\nAND CONTACT_DATE < '10-MAR-2019'\r\nAND DISTRICT IN ('07', '04');\r\n\r\n/*ORDINANCE VIOLATIONS*/\r\nSELECT *\r\nFROM DB.PD_ORDINANCE_VIOLATION\r\nWHERE OVISSUED_DATE BETWEEN TO_DATE('01-JAN-2019') AND TO_DATE('28-FEB-2019')\r\nAND (rtrim((to_char(OVISSUED_DATE,'MON'))) in ('JAN', 'FEB', 'MAR', 'OCT', 'NOV', 'DEC'))\r\nAND UNIT_NUMBER IN ('701', '702', '704');\r\n\r\n\r\n/* crimes historical */\r\nSELECT RPT_NO, DATE_OCCURRED, DATE_APPROVED, STNUM || ' ' || STDIR || ' '|| STREET || ' ' || CITY || ' ' || STATE AS ADDRESS, UCR, FBI, \"PRIMARY\", \r\nDESCRIPTION, STATUS, \r\nINDX, LOCATION, LOCATION_DESCR, DOMESTIC,  SHOOTINGS, VEHICLE_THEFT, METHOD, METHOD_DESCR, BEATASGN, CAU, MOTIVE_DESCR, \r\nBEAT, DISTRICT, WARPT_NO\r\nFROM DB.CRIMES\r\n--LEFT JOIN PRS_USER.ADDR_ADDRESS_MASTER c\r\n--ON a.STNUM = c.STREET_NO AND a.STDIR = c.STREET_DIRECTION AND a.STREET = c.STREET_NME\r\nWHERE DATE_APPROVED >= '11-FEB-2019'\r\nAND DATE_APPROVED <= '10-MAR-2019'\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\n--AND \"PRIMARY\" IN ('BURGLARY', 'ROBBERY', 'HOMICIDE', 'MOTOR VEHICLE THEFT', 'CRIM SEXUAL ASSAULT', 'THEFT')\r\nAND UCR IN ('0110','0261','0262','0263','0264','0265','0266','0271','0272','0274','0275','0281','0291','031A','031B','0312','0313','0320','0325',\r\n'0326','033A','033B','0330','0331','0334','0337','0340','041A','041B','0420','0430','0440','0450','0451','0452','0453','0454','0461','0462','0475','0479',\r\n'0480','0481','0482','0483','0484','0487','0488','0489','1753','1754','0610','0620','0630','0650','0710','0720','0810','0910','0915','0917','0918','0920',\r\n'0925','0927','0928','0930','0935','0937','0938')\r\nAND FBI IN ('00','01A','01B','02','03','04A','04B','05','06','07','09','01B','08A','08B','10','11','12','13','14','15','16','17','18','19','20','22',\r\n'24','26','MCC','TRF','WRT','21')\r\nAND DISTRICT IN ('04', '05', '06', '07', '22'); \r\n\r\n/* Index crimes */\r\nSELECT *\r\nFROM DB.CRIMES\r\nWHERE (DATE_OCCURRED >= '28-JAN-2018' AND DATE_OCCURRED <= '24-FEB-2018'\r\nOR DATE_OCCURRED >= '28-JAN-2019' AND DATE_OCCURRED <= '24-FEB-2019')\r\nAND INDX IN ('I')\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\nAND AREA IN ('3');\r\n\r\n/* SELECT an RPT_NO # to investigate */\r\nSELECT * \r\nFROM DB.CRIMES a\r\nLEFT JOIN PRS_USER.ADDR_ADDRESS_MASTER c\r\nON a.STNUM = c.STREET_NO AND a.STDIR = c.STREET_DIRECTION AND a.STREET = c.STREET_NME\r\nWHERE RPT_NO IN ('AA279023');\r\n\r\n/*Shootings*/\r\n/* shootings without the lat/long data */\r\nSELECT a.RPT_NO, a.BEAT, b.TABLE_SOURCE\r\nFROM DB.CRIMES a\r\nRIGHT JOIN RPT.COMPSTAT_SHOOTING b\r\nON a.RPT_NO = b.RPT_NO\r\nWHERE a.DATE_OCCURRED >= '01-JAN-2018'\r\nAND a.DATE_OCCURRED <= '31-DEC-2018'\r\n--AND A.DISTRICT IN ('04','05','06','07','22');\r\n\r\n/* Min date of any table */\r\nSELECT MIN(DATE_OCCURRED)\r\nFROM RPT.COMPSTAT_SHOOTING;\r\n\r\n/* The crimes table with shootings attached */\r\n/* crimes_historical */\r\nSELECT * \r\nFROM DB.CRIMES a\r\n--LEFT JOIN RPT.COMPSTAT_SHOOTING b\r\n--ON a.RPT_NO = b.RPT_NO\r\n--LEFT JOIN PRS_USER.ADDR_ADDRESS_MASTER c\r\n--ON a.STNUM = c.STREET_NO AND a.STDIR = c.STREET_DIRECTION AND a.STREET = c.STREET_NME\r\nWHERE DATE_OCCURRED BETWEEN TO_DATE('01-MAY-2013') AND TO_DATE('30-SEP-2018')\r\nAND (rtrim((to_char(DATE_OCCURRED,'MON'))) in ('MAY','JUN','JUL','AUG','SEP'))\r\n--AND a.FBI IN ('04B','04','01A','01B','02','03','04A','05','07')\r\nAND UCR in ('031A','031B','0326','033A','033B') \r\nAND (FBI IN ('00','01A','01B','02','03','04A','04B','05','06','07','09','01B','08A','08B','10',\r\n'11','12','13','14','15','16','17','18','19','20','22','24','26','MCC','TRF','WRT','21'))\r\nAND a.STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\nAND a.DISTRICT IN ('02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '15', '25');\r\n\r\n/*Shooting Victims*/\r\nSELECT RPT_NO, COUNT(RPT_NO) AS VICTIMS\r\nFROM RPT.COMPSTAT_SHOOTING_VICTIM\r\nWHERE DATE_OCCURRED >= '04-FEB-2019'\r\nAND DATE_OCCURRED <= '03-MAR-2019'\r\nAND DISTRICT IN ('03', '08', '09', '10')\r\nGROUP BY RPT_NO;\r\n\r\n/*Homicide Counts*/\r\nSELECT RPT_NO_NO, COUNT(RPT_NO_NO) AS HOMICIDES\r\nFROM DB.HOMICIDE\r\nWHERE COMPSTAT_DATE >= '01-JAN-2019'\r\nAND COMPSTAT_DATE <= '27-APR-2019'\r\nGROUP BY RPT_NO_NO;\r\n\r\n/*Inventories*/\r\nSELECT DISTINCT INCIDENT_NO, RECOVERED_DATE, STREET_NO || ' ' || STREET_DIRECTION || ' ' || STREET_NME || ' ' || a.CITY || ' ' || STATE AS REC_ADDRESS, a.DISTRICT,\r\nINVENTORY_TYPE, UCR, RPT_NO, DATE_OCCURRED\r\nFROM DB.EVIDENCENVENTORIES a\r\nINNER JOIN DB.CRIMES b\r\nON a.INCIDENT_NO = b.RPT_NO\r\nWHERE b.DATE_OCCURRED >= '04-FEB-2019'\r\nAND b.DATE_OCCURRED <= '03-MAR-2019'\r\nAND a.DISTRICT IN ('03', '08')\r\nAND a.INVENTORY_TYPE IN ('EXPENDED SHELL', 'FIRED BULLET');\r\n\r\n/*Inventories v2*/\r\nSELECT DISTINCT a.INCIDENT_NO, a.CREATED_DATE, a.STREET_NO || ' ' || a.STREET_DIRECTION || ' ' || a.STREET_NME || ' ' || a.CITY || ' ' || a.STATE AS REC_ADDRESS, a.DISTRICT,\r\na.INVENTORY_TYPE, a.INCIDENT_TYPE, b.TABLE_SOURCE\r\nFROM DB.EVIDENCENVENTORIES a\r\nLEFT JOIN RPT.COMPSTAT_SHOOTING b\r\nON a.INCIDENT_NO = b.RPT_NO\r\nWHERE RECOVERED_DATE >= '11-FEB-2019'\r\nAND RECOVERED_DATE <= '10-MAR-2019'\r\nAND a.DISTRICT IN ('10')\r\nAND INVENTORY_TYPE IN ('EXPENDED SHELL', 'FIRED BULLET');\r\n\r\n/* STREET_STOP Data */\r\nSELECT CONTACT_NO, CONTACT_SOURCE, CONTACT_TYPE, CONTACT_DATE, DISTRICT, BEAT, PD_UNIT_NO\r\nFROM DB.STREET_STOP_DETAILS\r\nWHERE CONTACT_DATE >= '11-FEB-2019'\r\nAND CONTACT_DATE < '10-MAR-2019'\r\nAND DISTRICT IN ('07', '04');\r\n\r\n/*ORDINANCE_VIOLATION*/\r\nSELECT *\r\nFROM DB.PD_ORDINANCE_VIOLATION2\r\nWHERE NOVSSUED_DATE BETWEEN TO_DATE('01-JAN-2019') AND TO_DATE('28-FEB-2019')\r\nAND (rtrim((to_char(NOVSSUED_DATE,'MON'))) in ('JAN', 'FEB', 'MAR', 'OCT', 'NOV', 'DEC'))\r\nAND UNIT_NUMBER IN ('701', '702', '704');\r\n\r\n/*CFS*/\r\nSELECT EVENTNUMBER, ENTRY_RECEIVED_DATE, CLOSE_COMPLETED_DATE, OCCSTREETNUMBER || ' ' || OCCSTREETDIR || ' '|| OCCSTREETNAME || ' ' || 'Chicago IL' AS OCC_ADDRESS,\r\nOCCLOCATION, \"ZONE\", UNIT, BEAT_OF_OCCURRENCE, BEAT_OF_SERVICE, DISTRICT_OF_OCCURRENCE, DISTRICT_OF_SERVICE, SECTOR_OF_OCCURRENCE, SECTOR_OF_SERVICE, \r\nSERVICESTREETNUMBER || ' ' || SERVICESTREETDIR || ' ' || SERVICESTREETNAME AS SERVICE_ADDRESS, SERVICELOCATION, INIT_911_DISPATCH_DESCR, FIN_911_DISPATCH_DESCR\r\nFROM DB.SERVICE_CALLS\r\nWHERE ENTRY_RECEIVED_DATE >= '11-MAR-2019'\r\nAND ENTRY_RECEIVED_DATE <= '07-APR-2019'\r\nAND FIN_911_DISPATCH IN ('COMINT')\r\nAND UNIT LIKE ('12%_%_%')\r\n;\r\n\r\n/*CFS RAPS*/\r\nSELECT EVENTNUMBER, ENTRY_RECEIVED_DATE, CLOSE_COMPLETED_DATE, OCCSTREETNUMBER || ' ' || OCCSTREETDIR || ' '|| OCCSTREETNAME || ' ' || 'Chicago IL' AS OCC_ADDRESS,\r\nOCCLOCATION, \"ZONE\", UNIT, BEAT_OF_OCCURRENCE, BEAT_OF_SERVICE, DISTRICT_OF_OCCURRENCE, DISTRICT_OF_SERVICE, SECTOR_OF_OCCURRENCE, SECTOR_OF_SERVICE, \r\nSERVICESTREETNUMBER || ' ' || SERVICESTREETDIR || ' ' || SERVICESTREETNAME AS SERVICE_ADDRESS, SERVICELOCATION, INIT_911_DISPATCH_DESCR, FIN_911_DISPATCH_DESCR,\r\nFIN_DISPOSITION_DESCR\r\nFROM DB.SERVICE_CALLS\r\nWHERE ENTRY_RECEIVED_DATE >= '28-MAY-2018'\r\nAND ENTRY_RECEIVED_DATE <= '03-SEP-2018'\r\nAND FIN_911_DISPATCH_DESCR IN ('RADIO ASSIGNMENTS PENDING')\r\n;\r\n\r\n/* Arrest table without the long narrative field WARNING lots of text fields/data */\r\nSELECT ARREST, OFFENDER, ARREST_DATE, ARR_YEAR, ARR_MONTH, arr_day_of_month, arr_day_of_year, arr_hour,\r\narr_beat, arr_district, PD_district, arresting_unit, arresting_beat, street_no, street_direction, street_nme,\r\ncity, state, zip, county, location_code, location_descr, statute, stat_descr, UCR_code, class,\r\nsecondary_class, o_district, o_beat, birth_date, age, birth_place, sex_code, race_code, unique_identifier_no, PD_arrest,\r\narrest_unit_descr\r\nFROM DB.ARREST\r\nWHERE ARREST_DATE >= '18-MAR-2019'\r\nAND ARREST_DATE <= '14-APR-2019'\r\nAND PD_ARREST = 'Y'\r\nAND ARR_DISTRICT = '11';\r\n\r\nSELECT *\r\nFROM DB.HOMICIDE\r\nWHERE INJURY_DATE >= '01-JAN-2015' \r\nAND INVOLUNTARY = 'N' \r\nAND JUSTIFIABLE = 'N'  \r\nAND COMPSTAT = 'Y';\r\n\r\n/*Homicide Counts*/\r\nSELECT INJURY_DESCRIPTION, COUNT(INJURY_DESCRIPTION)\r\nFROM DB.HOMICIDE\r\nGROUP BY INJURY_DESCRIPTION;\r\n\r\n/* shootings without the lat/long data */\r\nSELECT a.RPT_NO, a.DATE_OCCURRED, a.DATE_APPROVED, a.STNUM || ' ' || a.STDIR || ' '|| a.STREET || ' ' || a.CITY || ' ' || a.STATE AS ADDRESS, a.UCR, a.FBI, \"PRIMARY\", \r\na.DESCRIPTION, a.STATUS, \r\na.INDX, a.LOCATION, a.LOCATION_DESCR, a.DOMESTIC, a. a.SHOOTINGS, a.VEHICLE_THEFT, a.METHOD, a.METHOD_DESCR, a.BEATASGN, a.CAU, a.MOTIVE_DESCR, \r\na.BEAT, a.DISTRICT \r\nFROM DB.CRIMES a\r\nRIGHT JOIN RPT.COMPSTAT_SHOOTING b\r\nON a.RPT_NO = b.RPT_NO\r\nWHERE a.DATE_OCCURRED >= '01-JAN-2011'\r\nAND a.DATE_OCCURRED <= '07-JUN-2019'\r\nAND a.STREET LIKE '%LAKE SHORE%'\r\nOR a.STREET LIKE'%SKYWAY%'\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL');\r\n\r\n\r\n\r\n/* Query for all crimes */\r\nSELECT RPT_NO, DATE_OCCURRED, INV_ADDRESSES, PRIMARY, DESCRIPTION, LOCATION_DESCR, BEAT, DISTRICT, FBI, FBI_DESCR, FBINDX, UCR\r\nFROM DB.CRIMES\r\nWHERE TO_CHAR(DATE_OCCURRED, 'YYYY') = 2018 AND PRIMARY NOT IN ('NON-CRIMINAL', 'OTHER OFFENSE');\r\n\r\n/* Shootings (with lat/long data */\r\n/* Shootings */\r\nSELECT * \r\nFROM DB.CRIMES a\r\nRIGHT JOIN RPT.COMPSTAT_SHOOTING b\r\nON a.RPT_NO = b.RPT_NO\r\nLEFT JOIN PRS_USER.ADDR_ADDRESS_MASTER c\r\nON a.STNUM = c.STREET_NO AND a.STDIR = c.STREET_DIRECTION AND a.STREET = c.STREET_NME\r\nWHERE a.DATE_OCCURRED >= '01-JAN-2019'\r\nAND a.DATE_OCCURRED < '09-APRIL-2019'\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL');\r\n\r\n/* shootings without the lat/long data */\r\nSELECT * \r\nFROM DB.CRIMES a\r\nRIGHT JOIN RPT.COMPSTAT_SHOOTING b\r\nON a.RPT_NO = b.RPT_NO\r\nWHERE a.DATE_OCCURRED >= '01-JAN-2011'\r\nAND a.DATE_OCCURRED <= '31-JAN-2019'\r\nAND a.STREET LIKE '%LAKE SHORE%'\r\nOR a.STREET LIKE'%SKYWAY%'\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL');\r\n\r\n\r\n\r\n/* The crimes table with shootings attached */\r\n/* crimes_historical */\r\nSELECT * \r\nFROM DB.CRIMES a\r\n--LEFT JOIN RPT.COMPSTAT_SHOOTING b\r\n--ON a.RPT_NO = b.RPT_NO\r\n--LEFT JOIN PRS_USER.ADDR_ADDRESS_MASTER c\r\n--ON a.STNUM = c.STREET_NO AND a.STDIR = c.STREET_DIRECTION AND a.STREET = c.STREET_NME\r\nWHERE DATE_OCCURRED BETWEEN TO_DATE('01-MAY-2013') AND TO_DATE('30-SEP-2018')\r\nAND (rtrim((to_char(DATE_OCCURRED,'MON'))) in ('MAY','JUN','JUL','AUG','SEP'))\r\n--AND a.FBI IN ('04B','04','01A','01B','02','03','04A','05','07')\r\nAND UCR in ('031A','031B','0326','033A','033B') \r\nAND (FBI IN ('00','01A','01B','02','03','04A','04B','05','06','07','09','01B','08A','08B','10',\r\n'11','12','13','14','15','16','17','18','19','20','22','24','26','MCC','TRF','WRT','21'))\r\nAND a.STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\nAND a.DISTRICT IN ('02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '15', '25'); \r\n\r\n\r\n/*Motor Vehicle Theft*/\r\nSELECT * \r\nFROM DB.CRIMES\r\nWHERE DISTRICT IN ('10')\r\nAND UCR IN ('0910','0920','0915','0917','0930')\r\nAND DATE_OCCURRED >= '03-JUN-2018'\r\nAND STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL');\r\n\r\n/* Calls for service shots fired- for all cfs comment out 'init_911_dispatch' line */\r\nSELECT *\r\nFROM DB.SERVICE_CALLS\r\nWHERE ENTRY_RECEIVED_DATE >= '16-NOV-2018'\r\nAND ENTRY_RECEIVED_DATE < '19-NOV-2018'\r\nAND INIT_911_DISPATCH IN ('SHOTS','SHOTSF'); \r\n\r\n/* An example of pulling a narrative for a crime \r\nDESCRIPTION from the NARRATIVE table*/\r\nSELECT a.*, b.DESCRIPTION\r\nFROM DB.CRIMES a\r\nLEFT JOIN DB.NARRATIVE b\r\nON a.RPT_NO = b.RPT_NO_NO\r\nWHERE a.UCR IN ('0910','0915','0930','0935')\r\nAND a.DISTRICT = '04'\r\nAND a.DATE_OCCURRED >= '01-OCT-18'\r\nAND a.DATE_OCCURRED < '01-DEC-18'\r\nAND a.STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL');\r\n\r\n\r\n\r\n/* Homicides table, 2014 to 2018 */\r\nSELECT *\r\nFROM DB.HOMICIDE\r\nWHERE JUSTIFIABLE = 'N'\r\nAND COMPSTAT = 'Y'\r\nAND INVOLUNTARY = 'N'\r\nAND INJURY_DATE >= '01-JAN-2014'\r\nAND INJURY_DATE < '01-JAN-2019';\r\n\r\n/* Arrest table without the long narrative field-  feel free to include it all just know it becomes a pain with large amounts of data */\r\nSELECT ARREST, OFFENDER, ARREST_DATE, ARR_YEAR, ARR_MONTH, arr_day_of_month, arr_day_of_year, arr_hour,\r\narr_beat, arr_district, PD_district, arresting_unit, arresting_beat, street_no, street_direction, street_nme,\r\ncity, state, zip, county, location_code, location_descr, statute, stat_descr, UCR_code, class,\r\nsecondary_class, o_district, o_beat, birth_date, age, birth_place, sex_code, race_code, unique_identifier_no, PD_arrest,\r\narrest_unit_descr\r\nFROM DB.ARREST\r\nWHERE ARREST_DATE >= '01-JAN-2018'\r\nAND ARREST_DATE <= '31-DEC-2018'\r\n--AND ARR_DISTRICT = '02';\r\n/* WHERE ARR_YEAR >= '2018'\r\nAND ARR_YEAR < '2018'; */\r\n\r\nSELECT *\r\nFROM DB.ARREST\r\nWHERE ARR_YEAR = '2018';\r\n\r\n/* Traffic stops */\r\nSELECT * \r\nFROM DB.TRAFFIC_CC\r\nWHERE CONTACT_DATE >= '01-JAN-2016 00:00:00'\r\nAND CONTACT_DATE < '01-JAN-2019 00:00:00'\r\nAND CONTACT_TYPE = 'TRAFFIC';\r\n\r\n/* STREET_STOP Data */\r\nSELECT CONTACT_NO, CONTACT_SOURCE, CONTACT_TYPE, CONTACT_DATE, DISTRICT, BEAT, PD_UNIT_NO\r\nFROM DB.STREET_STOP_DETAILS\r\nWHERE CONTACT_DATE >= '11-FEB-2019'\r\nAND CONTACT_DATE < '10-MAR-2019'\r\nAND DISTRICT IN ('07', '04');\r\nSELECT CONTACT_NO, CONTACT_SOURCE, CONTACT_TYPE, CONTACT_DATE, DISTRICT, BEAT\r\nFROM DB.STREET_STOP_DETAILS\r\nWHERE TO_CHAR(CONTACT_DATE, 'YYYY') = 2018;\r\n\r\nSELECT *\r\nFROM DB.SPOTTER_LIVE_MV\r\nWHERE \"TIME\" >= '01-APR-2019'\r\nAND \"TIME\" < '01-May-2019'\r\nAND ;\r\n\r\n/* community area victim pull */\r\nSELECT a.*, b.*, c.COMMUNITY_AREA\r\nFROM DB.CRIMES a\r\nLEFT JOIN DB.VICTIMS b\r\nON a.RPT_NO = b.RPT_NO\r\nLEFT JOIN DB.ADDRESSES c\r\nON a.GEO_CODE = c.GEO_CODE\r\nWHERE a.STATUS NOT IN ('2-UNFOUNDED','7-CLOSED NON-CRIMINAL')\r\nAND a.DATE_OCCURRED >= '28-MAY-2018' AND a.DATE_OCCURRED <= '03-SEP-2018'\r\nAND a.FBI IN ('03', '04A', '04B', '08A', '08B') AND a.SHOOTINGS = 'N';\r\n\r\n/* specific query for streets of homicides */\r\nSELECT a.STREET_NO || ' ' || a.STREET_DIRECTION || ' '|| a.STREET_NME || ' ' || a.CITY || ' ' || a.STATE AS ADDRESS, a.*\r\nFROM DB.HOMICIDE a\r\nWHERE INJURY_DATE >= '28-MAY-2018' AND INJURY_DATE <= '03-SEP-2018'\r\nAND JUSTIFIABLE = 'N' AND INVOLUNTARY = 'N' AND COMPSTAT = 'Y';\r\n\r\n/* another project specific query */\r\nSELECT a.*, COALESCE(b.FIRST_NAME, c.VFIRST) as first_name, COALESCE(b.LAST_NAME, c.VLAST) as last_name, c.*, e.COMMUNITY_AREA\r\nFROM RPT.COMPSTAT_SHOOTING_VICTIM a\r\nLEFT JOIN DB.INVOLVED_PARTIES b on a.ID=b.ID AND a.TABLE_SOURCE = 'DOC PARTIES'\r\nLEFT JOIN DB.VICTIMS c on a.ID=c.NO AND a.TABLE_SOURCE = 'VICTIMS'\r\nLEFT JOIN DB.CRIMES d on a.RPT_NO=d.RPT_NO\r\nLEFT JOIN DB.ADDRESSES e ON d.GEO_CODE = e.GEO_CODE\r\nWHERE d.DATE_OCCURRED >= '28-MAY-2018' AND d.DATE_OCCURRED <= '03-SEP-2018';\r\n\r\n\r\n\r\n",
      "last_modified": "2024-05-31T20:56:25-05:00"
    }
  ],
  "collections": ["posts/posts.json"]
}
